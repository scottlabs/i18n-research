
var express = require('express')
  , modRewrite = require('../')
  , http = require('http');

var app = express();

app.configure(function() {
  app.set('port', process.env.PORT || 3000);
  app.use(express.logger('dev'));
  app.use(modRewrite([
    '/proxy/(.*) http://nodejs.org/$1 [P]',
    '!\\.\\w+$ /index.html'
  ]));
  app.use(express.static(__dirname));
});

http.createServer(app).listen(app.get('port'), function() {
  console.log('[%s] Express app listening on port ' + app.get('port'), process.pid);
});

